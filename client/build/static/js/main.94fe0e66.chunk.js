(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{56:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a(26),n=a.n(r),c=a(4),i=a(13),o=a(9),l=a(8),d=(a(55),a(56),a(0)),j=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(o.b,{to:"/stories/".concat(e.cardCategory.genre),children:Object(d.jsxs)("div",{className:"cardCategory",children:[Object(d.jsx)("div",{className:"nameCategory",children:e.cardCategory.genre}),Object(d.jsx)("div",{className:"containerLogoCategory",children:Object(d.jsx)("div",{className:"logoCategory",style:{backgroundImage:"url(".concat(e.cardCategory.image,")")}})})]})})})},u=a(2),b=a.n(u),m=a(7),h=a(5),p=a(12),O=a.n(p),x=a(6),f=a.n(x),v={addBook:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(s,r){var n,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.post("https://entrelineas.herokuapp.com/api/book",e,{headers:{Authorization:"Bearer ".concat(t)}});case 3:n=a.sent,s({type:"ADD_BOOK",payload:n.data.response}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f.a.fire((c={icon:"error",title:"\xa1Error!",text:"No se pudo crear el libro."},Object(m.a)(c,"text","Por favor intente mas tarde."),Object(m.a)(c,"showConfirmButton",!1),Object(m.a)(c,"timer",4e3),c));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()},addImage:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(s,r){var n,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.put("https://entrelineas.herokuapp.com/api/book",e,{headers:{Authorization:"Bearer ".concat(t)}});case 3:n=a.sent,s({type:"ADD_BOOK",payload:n.data.response}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f.a.fire((c={icon:"error",title:"\xa1Error!",text:"No se pudo cargar la imagen."},Object(m.a)(c,"text","Por favor intente mas tarde."),Object(m.a)(c,"showConfirmButton",!1),Object(m.a)(c,"timer",4e3),c));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()},getBooks:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t,a){var s,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://entrelineas.herokuapp.com/api/book");case 3:return s=e.sent,e.next=6,s.json();case 6:r=e.sent,t({type:"GET_BOOKS",payload:r.response}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},getByGenre:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a,s){var r,n,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://entrelineas.herokuapp.com/api/book/"+e);case 3:return r=t.sent,t.next=6,r.json();case 6:n=t.sent,a({type:"GET_BY_GENRE",payload:n.response}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),f.a.fire((c={icon:"error",title:"\xa1Error!",text:"No se pudo cargar la imagen."},Object(m.a)(c,"text","Por favor intente mas tarde."),Object(m.a)(c,"showConfirmButton",!1),Object(m.a)(c,"timer",4e3),c));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},searchBooks:function(e){return function(t,a){try{t({type:"SEARCH_BOOKS",payload:e})}catch(s){f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3})}}},addChapter:function(e,t,a){return function(){var s=Object(h.a)(b.a.mark((function s(r){var n;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.a.post("https://entrelineas.herokuapp.com/api/book/addChapter",{title:e,id:t},{headers:{Authorization:"Bearer ".concat(a)}});case 3:n=s.sent,r({type:"ADD_CHAPTER",payload:n.data.response}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3});case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()},sendContent:function(e,t,a,s){return function(){var r=Object(h.a)(b.a.mark((function r(n){var c;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.put("https://entrelineas.herokuapp.com/api/book/addChapter",{content:e,title:t,id:a},{headers:{Authorization:"Bearer ".concat(s)}});case 3:c=r.sent,n({type:"CHAPTER_CONTENT",payload:c.data.response}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},modifyChapterTitle:function(e,t,a,s){return function(){var r=Object(h.a)(b.a.mark((function r(n){var c;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.post("https://entrelineas.herokuapp.com/api/book/modifyChapterTitle",{title:e,id:t,chapterId:a},{headers:{Authorization:"Bearer ".concat(s)}});case 3:r.sent,r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),f.a.fire((c={icon:"error",title:"\xa1Error!",text:"No se pudo guardar el capitulo."},Object(m.a)(c,"text","Por favor intente mas tarde."),Object(m.a)(c,"showConfirmButton",!1),Object(m.a)(c,"timer",4e3),c));case 9:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()},modifyContent:function(e,t,a,s,r){return function(){var n=Object(h.a)(b.a.mark((function n(c,i){var o,l;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O.a.post("https://entrelineas.herokuapp.com/api/book/modifyChapter",{updatedContent:e,contentId:t,chapterId:a,bookId:s},{headers:{Authorization:"Bearer ".concat(r)}});case 3:o=n.sent,c({type:"UPDATE_BOOK",payload:o.data.response}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),f.a.fire((l={icon:"error",title:"\xa1Error!",text:"No se pudo guardar el capitulo."},Object(m.a)(l,"text","Por favor intente mas tarde."),Object(m.a)(l,"showConfirmButton",!1),Object(m.a)(l,"timer",4e3),l));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()},deleteContent:function(e,t,a,s){return function(){var r=Object(h.a)(b.a.mark((function r(n,c){var i,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.put("https://entrelineas.herokuapp.com/api/book/modifyChapter",{contentId:e,chapterId:t,bookId:a},{headers:{Authorization:"Bearer ".concat(s)}});case 3:i=r.sent,n({type:"UPDATE_BOOK",payload:i.data.response}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),f.a.fire((o={icon:"error",title:"\xa1Error!",text:"No se pudo guardar el capitulo."},Object(m.a)(o,"text","Por favor intente mas tarde."),Object(m.a)(o,"showConfirmButton",!1),Object(m.a)(o,"timer",4e3),o));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()},deleteBook:function(e){return console.log(e),function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.put("https://entrelineas.herokuapp.com/api/book/delete",{id:e});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},addComment:function(e,t,a){return function(){var s=Object(h.a)(b.a.mark((function s(r,n){var c;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.a.post("https://entrelineas.herokuapp.com/api/comments/",{content:e,id:t},{headers:{Authorization:"Bearer ".concat(a)}});case 3:c=s.sent,r({type:"ADD_COMMENTS",payload:c.data.respuesta}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),f.a.fire({icon:"error",title:"\xa1Lo siento!",text:"No se pudo enviar el comentario",showConfirmButton:!1,timer:4e3});case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e,t){return s.apply(this,arguments)}}()},deleteComment:function(e,t,a){return function(){var s=Object(h.a)(b.a.mark((function s(r,n){var c,i;return b.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,O.a.put("https://entrelineas.herokuapp.com/api/comments/delete",{id:e,idcomment:t},{headers:{Authorization:"Bearer ".concat(a)}});case 3:c=s.sent,r({type:"DELETE_COMMENT",payload:c.data.respuesta}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),f.a.fire((i={icon:"error",title:"\xa1Lo siento!",text:"Algo salio mal."},Object(m.a)(i,"text","No se pudo borrar el comentario, intente mas tarde."),Object(m.a)(i,"showConfirmButton",!1),Object(m.a)(i,"timer",4e3),i));case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e,t){return s.apply(this,arguments)}}()},modComment:function(e,t,a,s){return function(){var r=Object(h.a)(b.a.mark((function r(n,c){var i,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,O.a.put("https://entrelineas.herokuapp.com/api/comments/",{value:e,idcomment:t,id:a},{headers:{Authorization:"Bearer ".concat(s)}});case 3:i=r.sent,n({type:"ADD_COMMENTS",payload:i.data.respuesta}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),f.a.fire((o={icon:"error",title:"\xa1Lo siento!",text:"Algo salio mal."},Object(m.a)(o,"text","No se pudo editar el comentario, intente mas tarde."),Object(m.a)(o,"showConfirmButton",!1),Object(m.a)(o,"timer",4e3),o));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()},vote:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(s,r){var n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.post("https://entrelineas.herokuapp.com/api/vote",{id:e},{headers:{Authorization:"Bearer ".concat(t)}});case 3:n=a.sent,s({type:"VOTE",payload:n.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f.a.fire({icon:"error",title:"\xa1Lo siento!",text:"No se puede votar en este momento, intente mas tarde.",showConfirmButton:!1,timer:4e3});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()},dismissVote:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(s,r){var n,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.post("https://entrelineas.herokuapp.com/api/dismissvote",{id:e},{headers:{Authorization:"Bearer ".concat(t)}});case 3:n=a.sent,s({type:"DIS_VOTE",payload:n.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f.a.fire((c={icon:"error",title:"\xa1Error!"},Object(m.a)(c,"title","\xa1Lo siento!"),Object(m.a)(c,"text","No se puede sacar el voto en este momento, intente mas tarde."),Object(m.a)(c,"showConfirmButton",!1),Object(m.a)(c,"timer",4e3),c));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e,t){return a.apply(this,arguments)}}()},incViews:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a,s){var r,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("https://entrelineas.herokuapp.com/api/views",{id:e});case 3:r=t.sent,a({type:"VIEWS",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),f.a.fire((n={icon:"error",title:"\xa1Error!"},Object(m.a)(n,"title","\xa1Lo siento!"),Object(m.a)(n,"text","Algo salio mal, intente mas tarde."),Object(m.a)(n,"showConfirmButton",!1),Object(m.a)(n,"timer",4e3),n));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()}},g={getCardsCategories:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t,a){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("https://entrelineas.herokuapp.com/api/genre");case 3:s=e.sent,t({type:"GET_CARDS_GENRES",payload:s.data.response}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.a.fire({icon:"error",title:"\xa1Error!",text:"Algo salio mal. intente mas tarde.",showConfirmButton:!1,timer:4e3});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()}},N={incViews:v.incViews},y=Object(l.b)(null,N)((function(e){return Object(d.jsxs)("div",{className:"storyContainer",children:[Object(d.jsx)("div",{className:"storyPic",style:{backgroundImage:"url(".concat(e.libro.image,")")}}),Object(d.jsxs)("div",{className:"storyBodyContainer",children:[Object(d.jsx)("p",{className:"storyTitle",children:e.libro.title}),Object(d.jsxs)("p",{className:"storyUser",children:["de ",e.libro.user.firstname+" "+e.libro.user.lastname]}),Object(d.jsxs)("p",{className:"storyGenre",children:["Genero: ",e.libro.genre]}),Object(d.jsxs)("div",{className:"storyIcons",children:[Object(d.jsxs)("p",{className:"storyViews",children:[Object(d.jsx)("i",{className:"far fa-eye"})," ",e.libro.views?e.libro.views:e.libro.views=0]}),Object(d.jsxs)("p",{className:"storyStars",children:[Object(d.jsx)("i",{className:"far fa-star"})," ",e.libro.stars.length]}),Object(d.jsxs)("p",{className:"storyChapters",children:[Object(d.jsx)("i",{className:"fas fa-list-ul"})," ",e.libro.chapters.length]})]}),Object(d.jsx)("p",{className:"storyDescription",children:e.libro.description.substr(0,120)+"..."}),Object(d.jsx)("div",{className:"storyButtons",children:Object(d.jsx)(o.b,{to:"/story/".concat(e.libro._id),children:Object(d.jsx)("button",{onClick:function(){e.incViews(e.libro._id)},className:"btn btn-danger verMasStory",children:"Ver Mas"})})})]})]})})),k={getBooks:v.getBooks,search:v.searchBooks},C=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser,books:e.bookR.books,filter:e.bookR.filter,genres:e.cardR.genres}}),k)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1];Object(s.useEffect)((function(){e.getBooks()}),[]);return Object(d.jsxs)("div",{className:"containerComponentSearchStories",children:[Object(d.jsxs)("div",{className:"containerSearchBar",children:[Object(d.jsx)("input",{type:"text",className:"inputSearchStories",placeholder:"\xbfQu\xe9 vas a leer hoy?",onChange:function(t){e.search(t.target.value),n(!0),""===t.target.value&&n(!1)}}),Object(d.jsx)("div",{className:"iconSearchStories",children:Object(d.jsx)("i",{className:"fas fa-search"})})]}),!1===r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"containerTitleSearch",children:Object(d.jsxs)("h1",{children:["Explor\xe1 las categor\xedas",Object(d.jsx)("span",{children:"\xa0"})]})}),Object(d.jsx)("div",{className:"containerViewCardsCategories",children:e.genres.map((function(e,t){return Object(d.jsx)(j,{cardCategory:e},t)}))})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Su busqueda"}),Object(d.jsx)("div",{className:"resultBusqueda",children:e.filter.map((function(e,t){return Object(d.jsx)(y,{libro:e},t)}))})]})]})})),w={makeNewUser:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("https://entrelineas.herokuapp.com/api/user/signup",e);case 3:if((s=t.sent).data.success){t.next=6;break}return t.abrupt("return",s.data);case 6:a({type:"LOG_USER",payload:s.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),f.a.fire({icon:"error",title:"Ups!",text:"Algo salio mal, intenta nuevamente!",showConfirmButton:!1,timer:4e3});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},logInUser:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("https://entrelineas.herokuapp.com/api/user/signin",e);case 2:if((s=t.sent).data.success){t.next=5;break}return t.abrupt("return",s.data);case 5:a({type:"LOG_USER",payload:s.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},modifyUser:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a,s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("https://entrelineas.herokuapp.com/api/settings",e,{headers:{"Content-Type":"multipart/form-data"}});case 2:r=t.sent,a({type:"MODIFY_USER",payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},logFromLS:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a,s){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("https://entrelineas.herokuapp.com/api/user/ls/",{token:e},{headers:{Authorization:"Bearer ".concat(e)}});case 3:r=t.sent,a({type:"LOG_USER",payload:r.data}),t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(0),401!==t.t0.response.status){t.next=13;break}return f.a.fire({icon:"error",title:"\xa1CUIDADO!",text:"No tienes permitido ingresar a la web",showConfirmButton:!1,timer:4e3}),localStorage.clear(),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,a){return t.apply(this,arguments)}}()},resetPassword:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("https://entrelineas.herokuapp.com/api/user/reset-password",{email:e});case 3:t.sent,a({type:"RESET_PASSWORD"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),f.a.fire({icon:"error",title:"Ups!",text:"Algo salio mal, intenta nuevamente!",showConfirmButton:!1,timer:4e3});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},newPassword:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(s){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O.a.put("https://entrelineas.herokuapp.com/api/user/reset-password",{email:e,password:t});case 3:a.sent,s({type:"CHANGE_PASSWORD"}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),f.a.fire({icon:"error",title:"Ups!",text:"Algo salio mal, intenta nuevamente!",showConfirmButton:!1,timer:4e3});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},logOutUser:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOG_OUT_USER"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},S={logout:w.logOutUser,getBooks:v.getBooks,getCardsCategories:g.getCardsCategories},B=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser,genres:e.cardR.genres,cardsCategories:e.cardR.cardsCategories,books:e.bookR.books}}),S)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1];return Object(s.useEffect)((function(){e.getBooks(),e.getCardsCategories()}),[]),Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{className:"headerLeft",children:[Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("div",{className:"prueba"})}),Object(d.jsxs)("div",{className:"dropdown",children:[Object(d.jsx)("p",{children:"Navegar"}),Object(d.jsx)("div",{className:"dropdown-content",children:Object(d.jsx)("div",{className:"genres",children:e.genres.map((function(e,t){return Object(d.jsx)(o.b,{to:"/stories/".concat(e.genre),children:Object(d.jsx)("p",{className:"genre",children:e.genre})},"linkGenre"+t)}))})})]})]}),Object(d.jsx)(o.b,{to:"/search",children:Object(d.jsxs)("div",{className:"toSearch",children:[Object(d.jsx)("i",{className:"fas fa-search"}),Object(d.jsx)("p",{children:"Buscar"})]})}),e.loggedUser&&!e.loggedUser.image?Object(d.jsxs)("div",{className:"headerRight",children:[Object(d.jsxs)("p",{children:["Hola! ",e.loggedUser.firstname.toUpperCase()]}),Object(d.jsxs)("div",{className:"containerDrop",onClick:function(){return n(!r)},children:[r&&Object(d.jsx)("div",{className:"dropDownMenu",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)(o.b,{to:"/userprofile",children:Object(d.jsx)("li",{children:"Mi Perfil"})}),Object(d.jsx)(o.b,{to:"/add-book",children:Object(d.jsx)("li",{children:"Crear un Nuevo Libro"})}),Object(d.jsx)(o.b,{to:"/settings",children:Object(d.jsx)("li",{children:"Configuraci\xf3n"})}),Object(d.jsx)(o.b,{to:"/",onClick:e.logout,children:Object(d.jsx)("li",{children:"Cerrar mi Sesi\xf3n"})})]})}),Object(d.jsx)("div",{className:"dropDownPic",children:e.loggedUser.firstname.toUpperCase().substr(0,1)}),Object(d.jsx)("i",{style:{color:"black"},className:"fas fa-caret-down"})]})]}):e.loggedUser&&e.loggedUser.image?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"headerRight",children:[Object(d.jsxs)("p",{children:["Hola! ",e.loggedUser.firstname.toUpperCase()]}),Object(d.jsxs)("div",{className:"containerDrop",onClick:function(){return n(!r)},children:[r&&Object(d.jsx)("div",{className:"dropDownMenu",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)(o.b,{to:"/userprofile",children:Object(d.jsx)("li",{children:"Mi Perfil"})}),Object(d.jsx)(o.b,{to:"/add-book",children:Object(d.jsx)("li",{children:"Crear un Nuevo Libro"})}),Object(d.jsx)(o.b,{to:"/settings",children:Object(d.jsx)("li",{children:"Configuraci\xf3n"})}),Object(d.jsx)(o.b,{to:"/",onClick:e.logout,children:Object(d.jsx)("li",{children:"Cerrar mi Sesi\xf3n"})})]})}),Object(d.jsx)("div",{className:"dropDownPic",style:{backgroundImage:"url('".concat(e.loggedUser.image,"')")}}),Object(d.jsx)("i",{style:{color:"black"},className:"fas fa-caret-down"})]})]})}):Object(d.jsxs)("div",{className:"headerRight",children:[Object(d.jsx)(o.b,{to:"/signin",children:Object(d.jsx)("p",{children:"Iniciar sesi\xf3n"})}),Object(d.jsx)(o.b,{to:"/register",children:Object(d.jsx)("p",{children:"Reg\xedstrate"})})]})]})})),U=function(){return Object(d.jsxs)("div",{className:"firstSection",children:[Object(d.jsxs)("div",{className:"leftBoxFirst",children:[Object(d.jsx)("h1",{className:"titleFirst",children:"Hola, somos Entre L\xedneas."}),Object(d.jsx)("p",{className:"firstP",children:"La plataforma del mundo social basada en narrativa m\xe1s amada en el mundo"}),Object(d.jsx)("p",{className:"secondP",children:"Entre Lineas conecta una comunidad global de 90 millones de lectores y escritores a trav\xe9s del poder de las historias."}),Object(d.jsxs)("div",{className:"buttonBox",children:[Object(d.jsx)("button",{className:"btn btn-danger",children:"Comienza a leer"}),Object(d.jsx)("button",{className:"btn btn-danger boton2",children:"Comienza a escribir"})]})]}),Object(d.jsx)("div",{className:"rightBoxFirst"})]})},E=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"secondSection",children:[Object(d.jsxs)("div",{className:"upBoxSecond",children:[Object(d.jsx)("div",{className:"firstUp",children:Object(d.jsx)("p",{children:"Ver tu historia..."})}),Object(d.jsxs)("div",{className:"secondUp",children:[Object(d.jsxs)("div",{className:"verContainer",children:[Object(d.jsx)("i",{className:"fas fa-tv"}),Object(d.jsx)("p",{children:"Consigue que tu historia se produzca como una pel\xedcula"})]}),Object(d.jsxs)("div",{className:"verContainer",children:[Object(d.jsx)("i",{className:"fas fa-film"}),Object(d.jsx)("p",{className:"block",children:"Consigue que tu historia se adapte como Serie de Televisi\xf3n"})]}),Object(d.jsxs)("div",{className:"verContainer",children:[Object(d.jsx)("i",{className:"fas fa-book"}),Object(d.jsx)("p",{children:"Convi\xe9rtete en un autor publicado"})]})]})]}),Object(d.jsxs)("div",{className:"downBoxSecond",children:[Object(d.jsx)("div",{className:"imgBoxSecond"}),Object(d.jsxs)("div",{className:"textRightSecondBox",children:[Object(d.jsx)("p",{className:"firstTextRightSecond",children:"Tu historia original puede ser un nuevo y grandioso \xe9xito"}),Object(d.jsx)("p",{className:"secondTextRightSecond",children:"Entre Lineas Studios descubre nuevos talentos entre los escritores y los conecta a compa\xf1\xedas globales de multimedia, tales como:"}),Object(d.jsxs)("div",{className:"svgContainer",children:[Object(d.jsx)("div",{className:"sony"}),Object(d.jsx)("div",{className:"hulu"}),Object(d.jsx)("div",{className:"syfy"})]})]})]})]})})},I=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"thirdSection",children:[Object(d.jsxs)("div",{className:"upContainerThird",children:[Object(d.jsxs)("div",{className:"firstContainerUpThird",children:[Object(d.jsx)("p",{className:"titleThirdSec",children:"\xbfC\xf3mo funciona Entre Lineas?"}),Object(d.jsx)("p",{className:"subTitleThirdSec",children:"Permite que tu historia se ha descubierto a trav\xe9s del poder de comunidad y tecnolog\xeda en Entre Lineas."})]}),Object(d.jsxs)("div",{className:"secondContainerUpThird",children:[Object(d.jsxs)("div",{className:"infoSecondContainerThird",children:[Object(d.jsx)("div",{className:"numberSecondContThird",children:Object(d.jsx)("p",{children:"1"})}),Object(d.jsxs)("div",{className:"textSecondContThird",children:[Object(d.jsx)("p",{className:"titleTextSecContTh",children:"Crea"}),Object(d.jsx)("p",{className:"bodyTxtSecContTh",children:"Comparte tu voz \xfanica e historia original en Entre Lineas. Encuentra los recursos de escritura que necesitas para elaborar una historia."})]})]}),Object(d.jsxs)("div",{className:"infoSecondContainerThird",children:[Object(d.jsx)("div",{className:"numberSecondContThird",children:Object(d.jsx)("p",{children:"2"})}),Object(d.jsxs)("div",{className:"textSecondContThird",children:[Object(d.jsx)("p",{className:"titleTextSecContTh",children:"Construye"}),Object(d.jsx)("p",{className:"bodyTxtSecContTh",children:"Establece una base global de fans mientras tu historia gana lectores y notoriedad. Conecta con otros escritores afines a trav\xe9s del arte de la narrativa."})]})]}),Object(d.jsxs)("div",{className:"infoSecondContainerThird",children:[Object(d.jsx)("div",{className:"numberSecondContThird",children:Object(d.jsx)("p",{children:"3"})}),Object(d.jsxs)("div",{className:"textSecondContThird",children:[Object(d.jsx)("p",{className:"titleTextSecContTh",children:"Ampl\xeda"}),Object(d.jsx)("p",{className:"bodyTxtSecContTh",children:"\xa1Obt\xe9n el estatus de estrella de Entre Lineass y tu historia publicada o adaptada en cine o televisi\xf3n con Entre Lineas Studios"})]})]})]})]}),Object(d.jsxs)("div",{className:"imgThirdSec",children:[Object(d.jsx)("div",{className:"resources",children:Object(d.jsx)("p",{children:"50+ Recursos para la escritura"})}),Object(d.jsx)("div",{className:"readers",children:Object(d.jsx)("p",{children:"90 millones de Lectores"})}),Object(d.jsx)("div",{className:"offers",children:Object(d.jsx)("p",{children:"1000 + Ofrecimientos para la historia"})})]})]})})},P=function(){return Object(d.jsxs)("div",{className:"fourthSection",children:[Object(d.jsxs)("div",{className:"upContainerFourth",children:[Object(d.jsxs)("div",{className:"fourthSecText",children:[Object(d.jsx)("p",{className:"fourthTitle",children:"Lleva Entre L\xedneas Contigo"}),Object(d.jsx)("p",{className:"fourthBody",children:"Lee y escribe en cualquier parte, incluso sin conexi\xf3n."})]}),Object(d.jsxs)("div",{className:"fourthSecButtons",children:[Object(d.jsx)("button",{className:"btn btn-danger",children:"Comienza a Leer"}),Object(d.jsx)("button",{className:"btn btn-danger",children:"Comienza a Escribir"})]})]}),Object(d.jsx)("div",{className:"fourthSecBack"})]})},T=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"backgroundZindex"}),Object(d.jsxs)("div",{className:"sectionBox",children:[Object(d.jsx)(U,{}),Object(d.jsx)(E,{}),Object(d.jsx)(I,{}),Object(d.jsx)(P,{})]})]})},A=function(){return Object(d.jsxs)("footer",{children:[Object(d.jsx)("div",{className:"footerLeft",children:Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("div",{className:"prueba"})})}),Object(d.jsxs)("div",{className:"footerRight",children:[Object(d.jsx)("p",{children:"\xa9 2020 Entre L\xedneas."}),Object(d.jsxs)("div",{className:"socialNetworks",children:[Object(d.jsx)("a",{href:"https://www.facebook.com/",children:Object(d.jsx)("i",{className:"fab fa-facebook-f",style:{color:"#3b5998"}})}),Object(d.jsx)("a",{href:"https://twitter.com/",children:Object(d.jsx)("i",{className:"fab fa-twitter",style:{color:"#00acee"}})}),Object(d.jsx)("a",{href:"https://www.instagram.com/",children:Object(d.jsx)("i",{className:"fab fa-instagram",style:{color:"black"}})}),Object(d.jsx)("a",{href:"https://www.youtube.com/",children:Object(d.jsx)("i",{className:"fab fa-youtube",style:{color:"#c4302b"}})})]})]})]})},R=a(10),_=(a(43),{makeNewUser:w.makeNewUser}),D=Object(l.b)(null,_)((function(e){var t=Object(s.useState)({firstname:"",lastname:"",birthday:"",email:"",password:"",image:""}),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(!1),o=Object(c.a)(i,2),l=o[0],j=o[1],u=function(e){var t=e.target.value,a=e.target.name;n(Object(R.a)(Object(R.a)({},r),{},Object(m.a)({},a,t)))},p=""===r.firstname||""===r.lastname||""===r.birthday||""===r.email||""===r.password,O=function(e){f.a.fire({icon:"error",title:"\xa1CUIDADO!",text:e,showConfirmButton:!1,timer:4e3})},x=function(){var t=Object(h.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!p){t.next=5;break}return"Verifique que todos los campos esten llenos",O("Verifique que todos los campos esten llenos"),t.abrupt("return",!1);case 5:return t.next=7,e.makeNewUser(r);case 7:(s=t.sent)&&!s.success?s.errores.map((function(e){return O(e.message)})):f.a.fire({icon:"success",title:"Bienvenido",text:"\xa1Segui disfrutando de tus libros favoritos!",showConfirmButton:!1,timer:4e3});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"containerRegister",children:[Object(d.jsx)("div",{className:"imagRegister"}),Object(d.jsx)("div",{className:"registerInput",children:Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("h2",{children:"Crear Usuario"}),Object(d.jsxs)("div",{className:"nameAndLastName",children:[Object(d.jsx)("input",{className:"inputRegister",type:"text",name:"firstname",placeholder:"Nombre",onChange:u}),Object(d.jsx)("input",{className:"inputRegister",type:"text",name:"lastname",placeholder:"Apellido",onChange:u})]}),Object(d.jsx)("input",{className:"inputRegister",type:"date",min:"1950-01-01",max:"2021-2-31",name:"birthday",placeholder:"fechas de nacimiento",onChange:u}),Object(d.jsxs)("div",{className:"userNameAndPassword",children:[Object(d.jsx)("input",{className:"inputRegister",type:"text",name:"email",placeholder:"Email",onChange:u}),Object(d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(d.jsx)("input",{className:"inputRegister",type:l?"text":"password",name:"password",placeholder:"Contrase\xf1a",onChange:u}),Object(d.jsx)("i",{className:l?"far fa-eye-slash":"far fa-eye",onClick:function(){return j(!l)}})]})]}),Object(d.jsx)("p",{children:"*La contrase\xf1a debe contener al menos un n\xfamero."}),Object(d.jsx)("button",{className:"botonRegister",onClick:x,children:"Crear usuario"})]})}),Object(d.jsx)("div",{style:{height:"50vh",width:"60vw"}})]})})),L={logInUser:w.logInUser},F=Object(l.b)(null,L)((function(e){var t=Object(s.useState)({}),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(!1),l=Object(c.a)(i,2),j=l[0],u=l[1],p=function(e){f.a.fire({icon:"error",title:"\xa1CUIDADO!",text:e,showConfirmButton:!1,timer:4e3})},O=function(e){var t=e.target.value,a=e.target.name;n(Object(R.a)(Object(R.a)({},r),{},Object(m.a)({},a,t)))},x=function(){var t=Object(h.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==r.email&&""!==r.password){t.next=5;break}return"Verifique que todos los campos esten llenos",p("Verifique que todos los campos esten llenos"),t.abrupt("return",!1);case 5:return t.next=7,e.logInUser(r);case 7:(s=t.sent)&&!s.success?p(s.mensaje):f.a.fire({icon:"success",title:"Bienvenido",text:"\xa1Segui disfrutando de tus libros favoritos!",showConfirmButton:!1,timer:4e3});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"containerLogin",children:[Object(d.jsx)("div",{className:"imagRegister"}),Object(d.jsx)("div",{className:"registerInput",children:Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h2",{children:"Iniciar Sesion"}),Object(d.jsx)("input",{className:"inputRegister",type:"text",name:"email",placeholder:"Nombre de Usuario",onChange:O}),Object(d.jsxs)("div",{className:"a",children:[Object(d.jsx)("input",{className:"inputRegisterPassword",type:j?"text":"password",name:"password",placeholder:"Contrase\xf1a",onChange:O}),Object(d.jsx)("div",{className:"ojito",children:Object(d.jsx)("i",{className:j?"far fa-eye-slash":"far fa-eye",onClick:function(){return u(!j)}})})]}),Object(d.jsx)("button",{className:"botonRegister",onClick:x,children:"Iniciar sesion"})]})}),Object(d.jsx)("div",{style:{height:"50vh",width:"60vw"}}),Object(d.jsx)(o.b,{to:"/send-email",children:Object(d.jsx)("h5",{children:"Olvidaste tu contrase\xf1a?"})})]})})),G=a(79),M={getByGenre:v.getByGenre},z=Object(l.b)((function(e){return{books:e.bookR.books,booksByGenre:e.bookR.booksByGenre}}),M)((function(e){var t=e.match.params.genre,a=Object(s.useState)(!0),r=Object(c.a)(a,2),n=r[0],i=r[1],o=Object(s.useState)(!1),l=Object(c.a)(o,2),j=l[0],u=l[1],m=Object(s.useState)(""),p=Object(c.a)(m,2),O=p[0],x=p[1];return Object(s.useEffect)(Object(h.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getByGenre(t);case 2:u(!0),e.booksByGenre.sort((function(e,t){return t.views-e.views}));case 4:case"end":return a.stop()}}),a)}))),[t]),""!==O&&("mostPopular"===O?e.booksByGenre.sort((function(e,t){return t.views-e.views})):"lessPopular"===O&&e.booksByGenre.sort((function(e,t){return e.views-t.views})),x("mostPopular"),i(!n),x("")),Object(d.jsx)(d.Fragment,{children:j?Object(d.jsxs)("div",{className:"storiesContainer",children:[Object(d.jsxs)("h1",{children:["Historias de ",Object(d.jsx)("span",{className:"capitalize",children:t})]}),Object(d.jsxs)("div",{className:"boxStories",children:[Object(d.jsxs)("div",{className:"upContainerStories",children:[Object(d.jsxs)("p",{className:"storyNumber",children:[e.booksByGenre.length," Historias"]}),Object(d.jsxs)("div",{className:"boxInputStories",children:[Object(d.jsx)("label",{htmlFor:"popular",children:"Filtrar Por:"}),Object(d.jsxs)("select",{onChange:function(e){return x(e.target.value)},name:"popular",id:"cars",children:[Object(d.jsx)("option",{value:"mostPopular",children:"Mas Populares"}),Object(d.jsx)("option",{value:"lessPopular",children:"Menos Populares"})]})]})]}),Object(d.jsx)("div",{className:"downContainerStories",children:0===e.booksByGenre.length?Object(d.jsx)("div",{className:"ops",style:{height:"50vh"},children:Object(d.jsx)("h1",{children:"A\xfan no hay historias en esta secci\xf3n, se el primero!"})}):e.booksByGenre.map((function(e,t){return Object(d.jsx)(y,{libro:e},"story".concat(t))}))})]})]}):Object(d.jsx)("div",{className:"cajaSpinner",children:Object(d.jsx)("div",{className:"cajitaSpinner",children:Object(d.jsx)(G.a,{className:"spinner"})})})})})),V=a(46),q={addChapter:v.addChapter,sendContent:v.sendContent,getBooks:v.getBooks},H=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),q)((function(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(""),l=Object(c.a)(i,2),j=l[0],u=l[1],m=Object(s.useState)([]),p=Object(c.a)(m,2),O=p[0],x=p[1],v=Object(s.useState)(!1),g=Object(c.a)(v,2),N=g[0],y=g[1],k=e.match.params.id,C=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(!N),e.addChapter(r,k,e.loggedUser.token);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Enter"===a.key&&(x([].concat(Object(V.a)(O),[j])),""===j.content&&f.a.fire({icon:"error",title:"Error",text:"No puedes a\xf1adir un capitulo vac\xedo!",showConfirmButton:!0,timer:2e3}),e.sendContent(j,r,k,e.loggedUser.token),u(""),u({content:""}),a.preventDefault());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();console.log(j);var S=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x(""),n(""),y(!N),f.a.fire({icon:"success",title:"Listo",text:"\xa1Nuevo capitulo creado!",showConfirmButton:!0,timer:2e3});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("section",{className:"chapter",children:[Object(d.jsx)("div",{className:"imag-form-chapter"}),Object(d.jsxs)("div",{className:"frase-form",children:[Object(d.jsx)("div",{className:"frase-chapter",children:Object(d.jsx)("h4",{children:"\xab \xa1Atrap\xe1 al lector desde la primera p\xe1gina y logr\xe1 que tu historia este entre las m\xe1s populares! \xbb"})}),Object(d.jsxs)("div",{className:"container-form-chapter",children:[Object(d.jsxs)("div",{className:"capitulo",style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"2vh"},children:[Object(d.jsx)("h3",{children:"Agregar el nombre de tu nuevo cap\xedtulo"}),Object(d.jsx)("div",{className:"line",children:Object(d.jsx)("input",{className:"input-chapter",type:"text",name:"title",disabled:N&&!0,id:"title",placeholder:"Capitulo",value:r,onChange:function(e){return n(e.target.value)}})}),!N&&Object(d.jsx)("button",{className:"buttonNewChapter",onClick:C,children:"Listo!"})]}),N&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"form-chapter",children:O.length>0&&Object(d.jsx)("div",{className:"chapterSended",children:O.map((function(e){return Object(d.jsx)("textarea",{disabled:!0,style:{resize:"none",width:"100%"},children:e.content})}))})}),Object(d.jsx)("textarea",{type:"text",className:"textarea-chapter",name:"content",id:"content",cols:"20",rows:"5",placeholder:"Comenza a escibir tu historia...",onKeyPress:w,style:{resize:"none",width:"90%"},value:j.content,onChange:function(e){return u({content:e.target.value})}}),Object(d.jsxs)("div",{style:{display:"flex",width:"46vw",justifyContent:"space-between",marginBottom:"10vh"},children:[Object(d.jsx)("button",{className:"buttonNewChapter",onClick:S,children:Object(d.jsx)("span",{children:"A\xf1adir capitulo al libro!"})}),Object(d.jsx)(o.b,{to:"/finish-book/".concat(k),id:k,children:Object(d.jsx)("button",{className:"buttonNewChapter",children:Object(d.jsx)("span",{children:"Finalizar"})})})]}),Object(d.jsx)("p",{style:{fontSize:"2.2vh"},children:' * Cada vez que aprietes la tecla "Enter" se crea un nuevo p\xe1rrafo.'}),Object(d.jsx)("p",{style:{fontSize:"2.2vh"},children:"* A\xf1ades el capitulo a tu libro y sigues escribiendo!"}),Object(d.jsx)("p",{style:{marginBottom:"3vh",fontSize:"2.2vh"},children:' * Al hacer click en "Finalizar" tu libro se da por terminado y puedes agregarle foto de portada!'})]})]})]})]})})),K={addBook:v.addBook},W=Object(l.b)((function(e){return{newBook:e.bookR.newBook,loggedUser:e.auth.loggedUser}}),K)((function(e){var t=Object(s.useState)({}),a=Object(c.a)(t,2),r=a[0],n=a[1],i=function(e){var t=e.target.value,a=e.target.name;"image"===a&&(t=e.target.files[0]),n(Object(R.a)(Object(R.a)({},r),{},Object(m.a)({},a,t)))};Object(s.useEffect)((function(){e.newBook._id&&e.history.push("/new-book/".concat(e.newBook._id))}),[e.newBook._id]);var o=function(){var t=Object(h.a)(b.a.mark((function t(a){var s,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r.genre&&""!==r.genre&&""!==r.title&&""!==r.description&&""!==r.user&&""!==r.image){t.next=5;break}f.a.fire({icon:"error",title:"Verifique que todos los campos esten llenos.",showConfirmButton:!1,timer:4e3}),t.next=13;break;case 5:return(s=new FormData).append("genre",r.genre.trim()),s.append("title",r.title.trim()),s.append("description",r.description.trim()),t.next=11,e.addBook(s,e.loggedUser.token);case 11:(n=t.sent)&&!n.success?f.a.fire({icon:"error",title:"\xa1CUIDADO!",text:n.mensaje,showConfirmButton:!1,timer:4e3}):f.a.fire({icon:"success",title:"Listo",text:"\xa1Nuevo libro creado!",showConfirmButton:!1,timer:4e3});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("section",{className:"section-form-book",children:[Object(d.jsx)("div",{className:"imag-form-book"}),Object(d.jsxs)("div",{className:"frase-form",children:[Object(d.jsxs)("div",{className:"frase",children:[Object(d.jsx)("h4",{children:"\xab Escribir es la manera m\xe1s profunda de leer la vida \xbb"}),Object(d.jsx)("h3",{children:"- Francisco Umbral. -"})]}),Object(d.jsx)("div",{className:"container-form-book",children:Object(d.jsxs)("form",{className:"form-book",children:[Object(d.jsx)("h5",{className:"newBook",children:"Nuevo Libro"}),Object(d.jsx)("input",{className:"input-formBook",type:"text",name:"title",id:"title",placeholder:"Titulo",onChange:i}),Object(d.jsx)("textarea",{className:"textarea-formBook",name:"description",id:"description",cols:"30",rows:"10",placeholder:"Descripcion",onChange:i}),Object(d.jsxs)("select",{className:"input-formBook",name:"genre",id:"genre",defaultValue:"Elige un G\xe9nero",onChange:i,children:[Object(d.jsx)("option",{value:"",children:"Elige un G\xe9nero"}),Object(d.jsx)("option",{value:"Acci\xf3n",children:"Acci\xf3n"}),Object(d.jsx)("option",{value:"Aventura",children:"Aventura"}),Object(d.jsx)("option",{value:"Ciencia Ficci\xf3n",children:"Ciencia Ficci\xf3n"}),Object(d.jsx)("option",{value:"Cl\xe1sicos",children:"Cl\xe1sicos"}),Object(d.jsx)("option",{value:"Historias Cortas",children:"Historias Cortas"}),Object(d.jsx)("option",{value:"Hist\xf3ricas",children:"Hist\xf3ricas"}),Object(d.jsx)("option",{value:"Humor",children:"Humor"}),Object(d.jsx)("option",{value:"Romance",children:"Romance"}),Object(d.jsx)("option",{value:"Suspenso",children:"Suspenso"}),Object(d.jsx)("option",{value:"Terror",children:"Terror"})]}),Object(d.jsx)("button",{onClick:o,className:"buttonDiscover",children:Object(d.jsx)("span",{children:"Escribir cap\xedtulo "})})]})})]})]})})),Y={modifyUser:w.modifyUser},J=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),Y)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(""),o=Object(c.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(""),b=Object(c.a)(u,2),m=b[0],h=b[1],p=Object(s.useState)(""),O=Object(c.a)(p,2),x=O[0],v=O[1],g=Object(s.useState)(""),N=Object(c.a)(g,2),y=N[0],k=N[1],C=Object(s.useState)(""),w=Object(c.a)(C,2),S=w[0],B=w[1],U=Object(s.useState)(null),E=Object(c.a)(U,2),I=E[0],P=E[1];Object(s.useEffect)((function(){e.loggedUser?(j(e.loggedUser.email),h(e.loggedUser.firstname),v(e.loggedUser.lastname),e.loggedUser.birthday&&k(e.loggedUser.birthday.substr(-25,10))):(e.history.push("/search"),f.a.fire({icon:"error",title:"\xa1Ups!",text:"Algo salio mal, te pedimos disculpas",showConfirmButton:!1,timer:4e3}))}),[]);var T=function(e){f.a.fire({icon:"error",title:"\xa1CUIDADO!",text:e,showConfirmButton:!1,timer:4e3})};return Object(d.jsxs)("section",{className:"settings",children:[Object(d.jsx)("div",{className:"imagSettings"}),Object(d.jsxs)("div",{className:"container-form-settings",children:[Object(d.jsxs)("form",{className:"form-settings",children:[Object(d.jsxs)("div",{className:"tituloIcon",children:[Object(d.jsx)("div",{className:"iconoAjus"}),Object(d.jsx)("h4",{children:"Ajustes de usuario"}),Object(d.jsxs)("button",{className:"settingsEdit",onClick:function(e){e.preventDefault(),n(!r)},children:[Object(d.jsx)("i",{className:"fas fa-pencil-alt editPencil",style:{color:"white"}}),Object(d.jsx)("p",{children:"Comenzar"})]})]}),Object(d.jsxs)("div",{className:"line",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"text",name:"email",id:"email",value:l,disabled:!r,onChange:function(e){return j(e.target.value)}})]}),Object(d.jsxs)("div",{className:"line",children:[Object(d.jsx)("label",{htmlFor:"firstname",children:"Nombre"}),Object(d.jsx)("input",{type:"text",name:"firstname",id:"firstname",disabled:!r,value:m,onChange:function(e){return h(e.target.value)}})]}),Object(d.jsxs)("div",{className:"line",children:[Object(d.jsx)("label",{htmlFor:"lastname",children:"Apellido"}),Object(d.jsx)("input",{type:"text",name:"lastname",id:"lastname",disabled:!r,value:x,onChange:function(e){return v(e.target.value)}})]}),Object(d.jsxs)("div",{className:"line",children:[Object(d.jsx)("label",{htmlFor:"birthday",children:"Fecha de nacimiento"}),Object(d.jsx)("input",{type:"date",name:"birthday",id:"birthday",disabled:!r,value:y,onChange:function(e){return k(e.target.value)}})]}),Object(d.jsxs)("div",{className:"lineImgUser",children:[Object(d.jsx)("div",{className:"selectImagPerfil",style:{cursor:"pointer"},children:Object(d.jsxs)("label",{htmlFor:"image",for:"image",style:{cursor:"pointer"},children:[Object(d.jsx)("i",{style:{cursor:"pointer"},for:"image",class:"fas fa-hand-pointer"}),Object(d.jsx)("h6",{style:{cursor:"pointer"},children:"Click para seleccionar Imagen"})]})}),Object(d.jsx)("input",{className:"imagePort",type:"file",name:"image",id:"image",value:S,onChange:function(e){!function(){var e=document.getElementById("image").files[0],t=URL.createObjectURL(e);P(t)}(),B(e.target.value)}})]}),Object(d.jsx)("div",{className:"line",children:Object(d.jsx)("div",{className:"buttonSettings",onClick:function(t){t.preventDefault();var a=document.getElementById("email").value,s=document.getElementById("firstname").value,r=document.getElementById("lastname").value,n=document.getElementById("birthday").value,c=document.getElementById("image").files[0],i=new FormData;i.append("email",a.trim()),i.append("firstname",s.trim()),i.append("lastname",r.trim()),i.append("birthday",n),i.append("image",c),i.append("id",e.loggedUser.id);if(""===a||""===s||""===r){T("Verifique que todos los campos esten llenos")}else if(c&&[".jpg",".png",".jpeg"].some((function(e){return c.name.includes(e)})))e.modifyUser(i),f.a.fire({icon:"success",title:"Listo!",text:"Ajustes guardados",showConfirmButton:!1,timer:4e3});else{T("Extension de archivo no permitida")}},children:Object(d.jsx)("span",{children:"Confirmar cambios"})})})]}),Object(d.jsx)("div",{className:"userImage",style:{width:"20vw",height:"50vh",boxShadow:"0px 5px 5px rgba(0,0,0,0.2)",backgroundImage:"url('".concat(I,"')")}})]})]})})),Q=Object(l.b)((function(e){return{books:e.bookR.books}}))((function(e){var t=e.match.params.id,a=e.books.filter((function(e){return e._id===t})),r=parseInt(e.match.params.index);return Object(s.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(d.jsx)(d.Fragment,{children:0===a.length?Object(d.jsx)("div",{className:"cajaSpinner",children:Object(d.jsx)("div",{className:"cajitaSpinner",children:Object(d.jsx)(G.a,{className:"spinner"})})}):Object(d.jsx)("div",{className:"containerCap",children:Object(d.jsxs)("div",{className:"containerTitleAndUser",children:[Object(d.jsxs)("div",{className:"titleCap",children:[Object(d.jsx)("p",{children:a[0].chapters[r].title}),Object(d.jsxs)("div",{style:{width:"30vh",display:"flex",justifyContent:"space-between"},children:[Object(d.jsxs)("h5",{children:[Object(d.jsx)("i",{className:"far fa-eye"})," ",a[0].views," "]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("i",{className:"far fa-star"})," ",a[0].stars.length]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("i",{className:"fas fa-list-ul"})," ",a[0].chapters.length]})]})]}),Object(d.jsxs)("div",{className:"containerParrafosAndButton",children:[Object(d.jsx)("div",{className:"containerParrafos",children:a[0].chapters[r].chapter.map((function(e){return Object(d.jsx)("p",{children:e.content},e.content)}))}),r===a[0].chapters.length-1?Object(d.jsx)(o.b,{to:"/story/".concat(a[0]._id),children:Object(d.jsx)("button",{children:Object(d.jsx)("span",{children:"Volver al libro"})})}):Object(d.jsx)(o.b,{to:"/book/".concat(a[0]._id,"/").concat(a[0].chapters[r]._id,"/").concat(r+1),children:Object(d.jsx)("button",{children:Object(d.jsx)("span",{children:"Sigue leyendo la parte siguiente"})})})]})]})})})})),Z=a(80),X=a(81),$={deleteComments:v.deleteComment,modComment:v.modComment},ee=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),$)((function(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(!1),o=Object(c.a)(i,2),l=o[0],j=o[1],u=Object(s.useState)(""),m=Object(c.a)(u,2),p=m[0],O=m[1];Object(s.useEffect)((function(){e.loggedUser&&O(e.loggedUser.id)}),[]);var x=function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteComments(e.id,e.comment._id,e.loggedUser.token);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(h.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.modComment(r,e.comment._id,e.id,e.loggedUser.token);case 2:j(!l);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"containerComment",children:Object(d.jsxs)("div",{className:"containerComments",children:[Object(d.jsxs)("div",{className:"userPicAndName",children:[e.comment.userPic?Object(d.jsx)("img",{src:e.comment.userPic,className:"rounded-circle",alt:"..."}):Object(d.jsx)("div",{className:"dropDownPic",children:e.comment.firstName.toUpperCase().substr(0,1)}),Object(d.jsx)("h6",{className:"index",children:e.comment.firstName})]}),l?Object(d.jsxs)("div",{className:"d-flex",children:[Object(d.jsx)(Z.a,{className:"comment",id:"comment",type:"text",placeholder:"Edit comment",onChange:function(e){n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&f()}}),Object(d.jsx)(X.a,{onClick:f,children:Object(d.jsx)("i",{className:"fas fa-paper-plane"})})]}):Object(d.jsx)("div",{className:"contentComment",children:Object(d.jsx)("p",{children:e.comment.content})}),e.loggedUser&&p===e.comment.userId&&Object(d.jsxs)("div",{className:"botonesEditAndBorrar",children:[Object(d.jsx)(X.a,{onClick:x,children:Object(d.jsx)("i",{className:"far fa-trash-alt"})}),Object(d.jsx)(X.a,{onClick:function(){j(!l)},children:Object(d.jsx)("i",{className:"far fa-edit"})})]})]})})})),te={addComment:v.addComment,vote:v.vote,dismissVote:v.dismissVote,incViews:v.incViews},ae=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser,books:e.bookR.books,comments:e.bookR.comment}}),te)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(""),l=Object(c.a)(i,2),j=l[0],u=l[1],m=Object(s.useState)(""),p=Object(c.a)(m,2),O=p[0],x=p[1],v=e.match.params.id,g=e.books.filter((function(e){return e._id===v}));Object(s.useEffect)((function(){e.loggedUser&&x(e.loggedUser.id),e.comments.comments&&e.comments.comments.map((function(e){return console.log(e)}))}),[e.loggedUser]);var N=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addComment(j,g[0]._id,e.loggedUser.token);case 2:u("");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.vote(g[0]._id,e.loggedUser.token),g[0].stars.push(e.loggedUser.id),n(!r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dismissVote(g[0]._id,e.loggedUser.token),g[0].stars.pop(e.loggedUser.id),n(!r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:0===g.length?Object(d.jsx)("div",{className:"cajaSpinner",children:Object(d.jsx)("div",{className:"cajitaSpinner",children:Object(d.jsx)(G.a,{className:"spinner"})})}):Object(d.jsxs)(d.Fragment,{children:[" ",Object(d.jsx)("div",{className:"conteinerResp",children:Object(d.jsxs)("div",{className:"container-image-info-book",children:[Object(d.jsx)("div",{className:"imag-book-story-description",style:{backgroundImage:"url('".concat(g[0].image,"')")}}),Object(d.jsxs)("div",{className:"container-info-book",children:[Object(d.jsx)("h2",{children:g[0].title}),Object(d.jsx)("h5",{children:g[0].genre}),Object(d.jsxs)("div",{className:"views-stars-chapters",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("h5",{children:[" ",Object(d.jsx)("i",{className:"far fa-eye"})," ",g[0].views," "]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("h5",{children:[" ",Object(d.jsx)("i",{class:"far fa-star"})," ",g[0].stars.length]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("h5",{children:[" ",Object(d.jsx)("i",{class:"fas fa-list-ul"})," ",g[0].chapters.length]})})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("h5",{children:[g[0].user.firstname," ",g[0].user.lastname]})}),Object(d.jsxs)("div",{className:"stars",children:[g[0].chapters.length>0?Object(d.jsx)(o.b,{to:"/book/".concat(g[0]._id,"/").concat(g[0].chapters[0]._id,"/",0),children:Object(d.jsx)("button",{className:"BotonLeer",children:"Leer"})}):(f.a.fire({icon:"error",title:"\xa1Lo sentimos!",text:"Esta historia todavia no tiene capitulos"}),void e.history.push("/stories/".concat(g[0].genre))),g[0].stars.includes(O)?Object(d.jsxs)("button",{className:"BotonLeer",onClick:e.loggedUser&&k,children:["Quitar Voto ",Object(d.jsx)("i",{class:"fas fa-star"})]}):Object(d.jsxs)("button",{className:"BotonLeer",onClick:e.loggedUser?y:function(){return alert("Necesitas iniciar sesion para poder votar!")},children:["Depositar voto ",Object(d.jsx)("i",{class:"far fa-star"})]})]})]})]})}),Object(d.jsxs)("div",{className:"comment-table-container",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"table-title-container",children:Object(d.jsx)("h2",{children:"Tabla de Contenidos"})}),Object(d.jsx)("div",{className:"table-containe",children:g[0].chapters.map((function(e,t){return Object(d.jsx)(o.b,{to:"/book/".concat(g[0]._id,"/").concat(e._id,"/").concat(t),children:Object(d.jsx)("button",{children:Object(d.jsx)("p",{children:e.title})})})}))})]}),Object(d.jsxs)("div",{className:"coments-container-storyDescription",children:[Object(d.jsx)("div",{className:"comments-storyDescription",children:e.comments.comments?Object(d.jsx)("div",{children:e.comments.comments.map((function(e){return Object(d.jsx)(ee,{comment:e,id:g[0]._id},e._id)}))}):g[0].comments.length>0?Object(d.jsx)("div",{children:g[0].comments.map((function(e){return Object(d.jsx)(ee,{comment:e,id:g[0]._id},e._id)}))}):Object(d.jsx)("h2",{className:"text-center bg-white w-100",children:"Sin Comentarios"})}),Object(d.jsx)("div",{children:e.loggedUser?Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"inputButtomEnvComment",children:[Object(d.jsx)(Z.a,{className:"comment",id:"comment",type:"text",placeholder:"Comenta!",value:j,onChange:function(e){return u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&N()}}),Object(d.jsx)(X.a,{onClick:N,children:Object(d.jsx)("i",{class:"far fa-paper-plane"})})]})}):Object(d.jsx)("div",{className:"d-flex justify-content-center",children:Object(d.jsx)(Z.a,{className:"comment w-50 text-center",disabled:!0,type:"text",placeholder:"Debes registrarte para comentar!"})})})]})]})]})})})),se=Object(l.b)((function(e){return{books:e.bookR.books,loggedUser:e.auth.loggedUser}}))((function(e){return console.log(e.libro),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"storyContainerProfile",children:[Object(d.jsxs)("div",{className:"containerFirstBlockStory",children:[Object(d.jsx)("div",{className:"storyPicProfile",style:{backgroundImage:"url(".concat(e.libro.image,")")}}),Object(d.jsxs)("div",{className:"containerInformationBookProfile",children:[Object(d.jsx)("p",{className:"storyTitle",children:e.libro.title}),Object(d.jsxs)("p",{className:"storyUserProfile",children:["de ",Object(d.jsx)("span",{children:e.libro.user.firstname+" "+e.libro.user.lastname})]}),Object(d.jsxs)("p",{className:"storyGenreProfile",children:["Genero: ",Object(d.jsx)("span",{children:e.libro.genre})]}),Object(d.jsxs)("div",{className:"storyIconsProfile",children:[Object(d.jsxs)("p",{className:"storyViews",children:[Object(d.jsx)("i",{className:"far fa-eye"})," ",e.libro.views]}),Object(d.jsxs)("p",{className:"storyStars",children:[Object(d.jsx)("i",{className:"far fa-star"})," ",e.libro.stars.length]}),Object(d.jsxs)("p",{className:"storyChapters",children:[Object(d.jsx)("i",{className:"fas fa-list-ul"})," ",e.libro.chapters.length]})]})]})]}),Object(d.jsx)("div",{className:"containerSecondBlockStory",children:Object(d.jsx)("p",{className:"storyDescription",children:e.libro.description.substr(0,130)+"..."})}),Object(d.jsx)("div",{className:"containerThirdBlockStory",children:Object(d.jsx)("div",{className:"storyButtons",children:Object(d.jsx)(o.b,{to:"/modify-book/".concat(e.libro._id),children:Object(d.jsx)("button",{className:"btn btn-danger verMasStory",children:"Editar Libro"})})})})]})})})),re={logOut:w.logOutUser},ne=Object(l.b)((function(e){return{books:e.bookR.books,loggedUser:e.auth.loggedUser}}),re)((function(e){var t=e.books.filter((function(t){return t.user._id===e.loggedUser.id})),a=e.books.filter((function(t){return t.stars.includes(e.loggedUser.id)})),r=Object(s.useState)(!0),n=Object(c.a)(r,2),i=n[0],l=n[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"containerComponentUserProfile",children:[Object(d.jsx)("div",{className:"containerBannerUserData",children:Object(d.jsxs)("div",{className:"bannerUserData",children:[Object(d.jsxs)("div",{className:"photoEditProfile",children:[e.loggedUser.image?Object(d.jsx)("div",{className:"photoUser",style:{backgroundImage:"url(".concat(e.loggedUser.image,")")}}):Object(d.jsx)("div",{className:"letterUser",children:e.loggedUser.firstname.toUpperCase().substr(0,1)}),Object(d.jsx)("div",{className:"buttonEditProfile",children:Object(d.jsx)(o.b,{to:"/settings",children:Object(d.jsxs)("button",{children:[Object(d.jsx)("i",{className:"fas fa-cog"})," Editar mis Datos"]})})})]}),Object(d.jsxs)("div",{className:"informationProfileUserBlock",children:[Object(d.jsxs)("div",{className:"containerInformationFixed",children:[Object(d.jsxs)("div",{className:"informationProfileUserFixed",children:[Object(d.jsx)("div",{className:"iconInformationProfileUserFixed",children:Object(d.jsx)("i",{className:"fas fa-user"})}),Object(d.jsx)("div",{className:"dataInformationProfileUserFixed",children:Object(d.jsxs)("p",{children:[e.loggedUser.firstname," ",e.loggedUser.lastname]})})]}),Object(d.jsx)("div",{className:"informationProfileUserFixed",children:e.loggedUser.birthday?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"iconInformationProfileUserFixed",children:Object(d.jsx)("i",{className:"fas fa-birthday-cake"})}),Object(d.jsx)("div",{className:"dataInformationProfileUserFixed",children:Object(d.jsx)("p",{children:e.loggedUser.birthday.substr(0,10)})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"iconInformationProfileUserFixed",children:Object(d.jsx)("i",{className:"fas fa-envelope"})}),Object(d.jsx)("div",{className:"dataInformationProfileUserFixed",children:Object(d.jsx)("p",{children:e.loggedUser.email.substr(0,10)})})]})}),Object(d.jsxs)("div",{className:"informationProfileUserFixed",children:[Object(d.jsx)("div",{className:"iconInformationProfileUserFixed",children:Object(d.jsx)("i",{className:"fas fa-bookmark"})}),Object(d.jsx)("div",{className:"dataInformationProfileUserFixed",children:Object(d.jsx)("p",{children:"Libros Guardados"})})]})]}),Object(d.jsx)("div",{className:"buttonLogout",children:Object(d.jsx)(o.b,{to:"/",onClick:e.logOut,children:Object(d.jsx)("button",{children:"Cerrar mi sesi\xf3n"})})})]})]})}),Object(d.jsxs)("div",{className:"containerContentOptions",children:[Object(d.jsx)("h2",{className:"titleProfile",children:"Mi Perfil"}),Object(d.jsxs)("div",{className:"containerNavMenu",children:[Object(d.jsx)(o.b,{children:Object(d.jsx)("div",{onClick:function(){return l(!0)},className:"optionMenu",children:"Mis Libros"})}),Object(d.jsx)(o.b,{children:Object(d.jsx)("div",{onClick:function(){return l(!1)},className:"optionMenu savedBooks",children:"Mi Biblioteca"})})]}),Object(d.jsx)("div",{className:"containerViewComponentOption",children:Object(d.jsx)("div",{className:"booksBoxUserProf",children:i?0===t.length?Object(d.jsx)("h1",{style:{textAlign:"center"},children:"Todav\xeda no tienes libros creados. Comienza a escribir tus historias"}):t.map((function(e){return Object(d.jsx)(se,{libro:e})})):0===a.length?Object(d.jsx)("h1",{style:{textAlign:"center"},children:"Todavia no te gusto ningun libro!"}):a.map((function(e){return Object(d.jsx)(se,{libro:e})}))})})]})]})})})),ce={addImage:v.addImage},ie=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),ce)((function(e){var t=e.match.params.id;console.log(e.match.url);var a=Object(s.useState)({}),r=Object(c.a)(a,2),n=r[0],i=r[1],o=Object(s.useState)(null),l=Object(c.a)(o,2),j=l[0],u=l[1];return Object(d.jsxs)("section",{className:"conteiner-finishBook",children:[Object(d.jsx)("div",{className:"imagFinishBook"}),Object(d.jsx)("div",{className:"form-finishBook",children:Object(d.jsxs)("div",{className:"inputAndButtonFinishBook",children:[Object(d.jsxs)("div",{className:"finishBook",children:[Object(d.jsx)("h3",{children:"/finish-book/:id"===e.match.url?"Elegir foto de portada":"Cambiar foto de portada!"}),Object(d.jsx)("div",{className:"selectImagPort",style:{cursor:"pointer"},children:Object(d.jsxs)("label",{style:{cursor:"pointer"},for:"image",children:[Object(d.jsx)("i",{style:{cursor:"pointer"},for:"image",className:"fas fa-hand-pointer"}),Object(d.jsx)("h6",{style:{cursor:"pointer"},children:"Click para seleccionar Imagen"})]})}),Object(d.jsx)("input",{className:"imagePort",type:"file",name:"image",id:"image",onChange:function(e){!function(){var e=document.getElementById("image").files[0],t=URL.createObjectURL(e);u(t)}();var t=e.target.value,a=e.target.name;"image"===a&&(t=e.target.files[0]),i(Object(R.a)(Object(R.a)({},n),{},Object(m.a)({},a,t)))}}),Object(d.jsx)("button",{onClick:function(){var a=new FormData;a.append("image",n.image),a.append("id",t),console.log(n.image);n.image&&[".jpg",".png",".jpeg"].some((function(e){return n.image.name.includes(e)}))?(e.addImage(a,e.loggedUser.token),f.a.fire({icon:"success",title:"Libro guardado con exito!",showConfirmButton:!1,timer:4e3})):f.a.fire({icon:"error",title:"Extension de archivo no permitida.",showConfirmButton:!1,timer:4e3})},className:"buttonFinshBook",children:Object(d.jsx)("span",{children:"TERMINAR EL LIBRO"})})]}),Object(d.jsx)("div",{className:"portadaImage",style:{boxShadow:"0px 5px 5px rgba(0,0,0,0.2)",backgroundImage:"url('".concat(j,"')")}})]})})]})})),oe={deleteBook:v.deleteBook},le=Object(l.b)((function(e){return{books:e.bookR.books,loggedUser:e.auth.loggedUser}}),oe)((function(e){var t=e.match.params.id,a=e.books.filter((function(e){return e._id===t}));Object(s.useEffect)((function(){}),[]);var r=function(){var a=Object(h.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.deleteBook(t);case 2:e.history.push("/userprofile");case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:0===a.length?Object(d.jsx)("div",{className:"cajaSpinner",children:Object(d.jsx)("div",{className:"cajitaSpinner",children:Object(d.jsx)(G.a,{className:"spinner"})})}):Object(d.jsxs)(d.Fragment,{children:[" ",Object(d.jsxs)("div",{className:"oneModify",children:[Object(d.jsx)("div",{className:"twoModify"}),Object(d.jsxs)("div",{className:"threeModify",children:[Object(d.jsx)("div",{className:"fourModify",style:{backgroundImage:"url('".concat(a[0].image,"')"),width:"15vw",height:"50vh"}}),Object(d.jsxs)("div",{className:"fiveModify",children:[Object(d.jsx)("h2",{children:a[0].title}),Object(d.jsx)("h5",{children:a[0].genre}),Object(d.jsx)(o.b,{to:"/modify-book/".concat(t,"/image"),children:Object(d.jsx)("button",{className:"buttonModify",children:"Modificar Imagen"})}),Object(d.jsx)("button",{onClick:r,className:"buttonModify",style:{backgroundColor:"red",marginLeft:"1vw"},children:"Eliminar Libro"})]})]})]}),Object(d.jsx)("div",{className:"sixModify",children:Object(d.jsxs)("div",{className:"sevenModify",children:[Object(d.jsx)("div",{className:"eightModify",children:Object(d.jsx)("h2",{children:"Tabla de Contenidos"})}),Object(d.jsx)("div",{className:"nineModify",children:a[0].chapters.map((function(e,t){return Object(d.jsx)(o.b,{to:"/modify-book/".concat(a[0]._id,"/").concat(e._id,"/").concat(t),children:Object(d.jsx)("button",{children:Object(d.jsx)("p",{children:e.title})})})}))})]})})]})})})),de={newPassword:w.newPassword},je=Object(l.b)(null,de)((function(e){var t=e.match.params.email,a=Object(s.useState)({password:"",newPassword:""}),r=Object(c.a)(a,2),n=r[0],i=r[1],o=Object(s.useState)([]),l=Object(c.a)(o,2),j=(l[0],l[1],Object(s.useState)(!1)),u=Object(c.a)(j,2),p=u[0],O=u[1],x=function(e){var t=e.target.value,a=e.target.name;i(Object(R.a)(Object(R.a)({},n),{},Object(m.a)({},a,t)))},f=!n.password,v=function(){var a=Object(h.a)(b.a.mark((function a(s){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),!f){a.next=6;break}return alert("Debe ingresar una nueva contrase\xf1a"),a.abrupt("return",!0);case 6:if(n.password===n.newPassword){a.next=10;break}alert("las contrase\xf1as no coinciden"),a.next=14;break;case 10:return a.next=12,e.newPassword(t,n.password);case 12:(r=a.sent)&&!r.success?console.log(r):r&&r.success&&alert("Password almacenada con exito");case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"containerRegister",children:[Object(d.jsx)("div",{className:"imagRegister"}),Object(d.jsx)("div",{className:"registerInput",children:Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("h2",{children:"Recuperar Contrase\xf1a"}),Object(d.jsx)("div",{className:"userNameAndPassword",children:Object(d.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(d.jsx)("input",{className:"inputRegister",type:p?"text":"password",name:"password",placeholder:"Contrase\xf1a",onChange:x}),Object(d.jsx)("input",{className:"inputRegister",type:p?"text":"password",name:"newPassword",placeholder:"Contrase\xf1a",onChange:x}),Object(d.jsx)("i",{className:p?"far fa-eye-slash":"far fa-eye",onClick:function(){return O(!p)}})]})}),Object(d.jsx)("button",{className:"botonRegister",onClick:v,children:"Restablecer Contrase\xf1a"})]})}),Object(d.jsx)("div",{style:{height:"50vh",width:"60vw"}})]})})),ue={resetPassword:w.resetPassword},be=Object(l.b)(null,ue)((function(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)([]),o=Object(c.a)(i,2),l=(o[0],o[1]),j=""===r,u=function(){var t=Object(h.a)(b.a.mark((function t(a){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!j){t.next=4;break}return alert("Debes escribir un email valido!"),t.abrupt("return",!0);case 4:return l([]),t.next=7,e.resetPassword(r);case 7:(s=t.sent)&&!s.success?l(s.errores.details):alert("La solicitud de restablecimiento de contrase\xf1a fue generada con exito, chequea tu mail.");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"containerRegister",children:[Object(d.jsx)("div",{className:"imagRegister"}),Object(d.jsx)("div",{className:"registerInput",children:Object(d.jsxs)("div",{className:"register",children:[Object(d.jsx)("h2",{children:"Solicitud de restablecimiento de contrase\xf1a"}),Object(d.jsx)("div",{className:"userNameAndPassword",children:Object(d.jsx)("input",{className:"inputRegister",type:"text",name:"email",placeholder:"Email",onChange:function(e){return n(e.target.value.trim())}})}),Object(d.jsx)("button",{className:"botonRegister",onClick:u,children:"Recuperar contrase\xf1a!"})]})}),Object(d.jsx)("div",{style:{height:"50vh",width:"60vw"}})]})})),me={modifyContent:v.modifyContent,deleteContent:v.deleteContent},he=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),me)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(""),o=Object(c.a)(i,2),l=o[0],j=o[1],u=e.content,m=u.content,p=u._id,O=e.bookId,x=e.chapterId;Object(s.useEffect)((function(){j(m)}),[]);var f=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.modifyContent(l,p,x,O,e.loggedUser.token);case 2:n(!r);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteContent(p,x,O,e.loggedUser.token);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{children:r?Object(d.jsxs)("div",{className:"form-chapter",children:[Object(d.jsx)("textarea",{className:"textarea-chapter",name:"updatedContent",id:"updatedContent",value:l,onChange:function(e){return j(e.target.value)},style:{resize:"none",width:"100%"}}),Object(d.jsx)("i",{onClick:f,onKeyPress:function(e){"Enter"===e.key&&f()},className:"fas fa-sign-in-alt"}),Object(d.jsx)("i",{onClick:function(){return n(!r)},className:"far fa-window-close"})]}):Object(d.jsxs)("div",{children:[Object(d.jsx)("textarea",{name:"updatedContent",id:"updatedContent",disabled:!r&&!0,value:l,style:{resize:"none",width:"100%"}}),Object(d.jsx)("i",{onClick:function(e){n(!r),j(m)},className:"far fa-edit"}),Object(d.jsx)("i",{onClick:v,className:"fas fa-eraser"})]})})})),pe={modifyChapterTitle:v.modifyChapterTitle,sendContent:v.sendContent,getBooks:v.getBooks},Oe=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser,books:e.bookR.books}}),pe)((function(e){var t=Object(s.useState)(""),a=Object(c.a)(t,2),r=a[0],n=a[1],i=Object(s.useState)(!1),l=Object(c.a)(i,2),j=l[0],u=l[1],m=e.match.params.id,p=e.match.params.chapterId,O="/new-book/:id"===e.match.url,x=e.books.filter((function(e){return e._id===m})),f=parseInt(e.match.params.index);Object(s.useEffect)((function(){x.length>0&&n(x[0].chapters[f].title)}),[x]);var v=function(){var t=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u(!j),e.modifyChapterTitle(r,m,p,e.loggedUser.token);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:0===x.length?Object(d.jsx)("div",{className:"cajaSpinner",children:Object(d.jsx)("div",{className:"cajitaSpinner",children:Object(d.jsx)(G.a,{className:"spinner"})})}):Object(d.jsxs)("section",{className:"chapter",children:[Object(d.jsx)("div",{className:"imag-form-chapter"}),Object(d.jsxs)("div",{className:"frase-form",children:[Object(d.jsx)("div",{className:"frase-chapter",children:Object(d.jsx)("h4",{children:"\xab \xa1Atrap\xe1 al lector desde la primera p\xe1gina y logr\xe1 que tu historia este entre las m\xe1s populares! \xbb"})}),Object(d.jsxs)("div",{className:"container-form-chapter",children:[Object(d.jsxs)("div",{className:"capitulo",style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"2vh"},children:[Object(d.jsx)("h3",{children:O?"Agregar el nombre de tu nuevo cap\xedtulo":"Modificar t\xedtulo del cap\xedtulo"}),Object(d.jsx)("div",{className:"line",children:Object(d.jsx)("input",{className:"input-chapter",type:"text",name:"title",id:"title",disabled:j&&!0,placeholder:"Capitulo",value:r,onChange:function(e){return n(e.target.value)}})}),!j&&Object(d.jsx)("button",{className:"buttonNewChapter",onClick:v,children:"Listo!"})]}),j&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"form-chapter",children:x[0].chapters[f].chapter.map((function(e){return Object(d.jsx)(he,{bookId:m,chapterId:p,content:e})}))}),Object(d.jsx)("div",{style:{display:"flex",width:"46vw",justifyContent:"center",marginBottom:"10vh"},children:Object(d.jsx)(o.b,{to:"/modify-book/".concat(m),id:m,children:Object(d.jsx)("button",{className:"buttonNewChapter",children:Object(d.jsx)("span",{children:"Volver"})})})}),Object(d.jsx)("p",{style:{fontSize:"2.2vh"},children:' * Cada vez que aprietes la tecla "Enter" se crea un nuevo p\xe1rrafo.'}),Object(d.jsx)("p",{style:{fontSize:"2.2vh"},children:"* A\xf1ades el capitulo a tu libro y sigues escribiendo!"}),Object(d.jsx)("p",{style:{marginBottom:"3vh",fontSize:"2.2vh"},children:' * Al hacer click en "Finalizar" tu libro se da por terminado y puedes agregarle foto de portada!'})]})]})]})]})})})),xe={logFromLS:w.logFromLS},fe=Object(l.b)((function(e){return{loggedUser:e.auth.loggedUser}}),xe)((function(e){var t=Object(s.useState)(!1),a=Object(c.a)(t,2),r=a[0],n=a[1];if(e.loggedUser)var l=Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",component:T}),Object(d.jsx)(i.b,{exact:!0,path:"/search",component:C}),Object(d.jsx)(i.b,{path:"/register",component:D}),Object(d.jsx)(i.b,{path:"/add-book",component:W}),Object(d.jsx)(i.b,{path:"/stories/:genre",component:z}),Object(d.jsx)(i.b,{path:"/story/:id",component:ae}),Object(d.jsx)(i.b,{path:"/settings",component:J}),Object(d.jsx)(i.b,{path:"/book/:id/:chapter/:index",component:Q}),Object(d.jsx)(i.b,{path:"/new-book/:id",component:H}),Object(d.jsx)(i.b,{path:"/userprofile",component:ne}),Object(d.jsx)(i.b,{path:"/finish-book/:id",component:ie}),Object(d.jsx)(i.b,{path:"/modify-book/:id/image",component:ie}),Object(d.jsx)(i.b,{path:"/modify-book/:id/:chapterId/:index",component:Oe}),Object(d.jsx)(i.b,{path:"/modify-book/:id",component:le}),Object(d.jsx)(i.b,{path:"/reset-password/:email",component:je}),Object(d.jsx)(i.b,{path:"/myBooks",component:se}),Object(d.jsx)(i.a,{to:"/search"})]})});else localStorage.getItem("token")?e.logFromLS(localStorage.getItem("token")).then((function(e){e&&n(!r)})):l=Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",component:T}),Object(d.jsx)(i.b,{exact:!0,path:"/search",component:C}),Object(d.jsx)(i.b,{path:"/register",component:D}),Object(d.jsx)(i.b,{path:"/signin",component:F}),Object(d.jsx)(i.b,{path:"/stories/:genre",component:z}),Object(d.jsx)(i.b,{path:"/story/:id",component:ae}),Object(d.jsx)(i.b,{path:"/book/:id/:chapter/:index",component:Q}),Object(d.jsx)(i.b,{path:"/send-email",component:be}),Object(d.jsx)(i.b,{path:"/reset-password/:email",component:je}),Object(d.jsx)(i.a,{to:"/"})]})});return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(B,{}),l,Object(d.jsx)(A,{})]})})})),ve=a(20),ge={books:[],newBook:[],filter:[],comment:[],booksByGenre:[],vote:{}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOK":case"CHAPTER_CONTENT":case"GET_NEW_BOOK":return Object(R.a)(Object(R.a)({},e),{},{newBook:t.payload});case"GET_BOOKS":return Object(R.a)(Object(R.a)({},e),{},{books:t.payload,filter:t.payload,comment:e.books.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"GET_BY_GENRE":return Object(R.a)(Object(R.a)({},e),{},{booksByGenre:t.payload});case"SEARCH_BOOKS":return Object(R.a)(Object(R.a)({},e),{},{filter:e.books.filter((function(e){return e.title.toUpperCase().includes(t.payload.toUpperCase().trim())||e.genre.toUpperCase().includes(t.payload.toUpperCase().trim())||e.user.firstname.toUpperCase().includes(t.payload.toUpperCase().trim())||e.user.lastname.toUpperCase().includes(t.payload.toUpperCase().trim())}))});case"ADD_COMMENTS":case"DELETE_COMMENT":return Object(R.a)(Object(R.a)({},e),{},{comment:t.payload});default:return e}},ye={loggedUser:null},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_USER":return localStorage.setItem("token",t.payload.response.token),Object(R.a)(Object(R.a)({},e),{},{loggedUser:t.payload.response});case"LOG_OUT_USER":return localStorage.clear(),Object(R.a)(Object(R.a)({},e),{},{loggedUser:null});default:return e}},Ce={genres:[]},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CARDS_GENRES":return{genres:t.payload};default:return e}},Se=Object(ve.c)({bookR:Ne,auth:ke,cardR:we}),Be=a(45),Ue=Object(ve.d)(Se,Object(ve.a)(Be.a));n.a.render(Object(d.jsx)(l.a,{store:Ue,children:Object(d.jsx)(fe,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.94fe0e66.chunk.js.map